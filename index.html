<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dynamic Lossless Player</title>
  <style>
    body {
      background-color: #121212;
      color: #eee;
      font-family: 'Courier New', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
    }

    h1 {
      color: #ff4d4d;
      margin-bottom: 20px;
    }

    .search-bar {
      margin-bottom: 20px;
      width: 100%;
      max-width: 600px;
    }

    .search-input {
      width: 100%;
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ff4d4d;
      background-color: #1e1e1e;
      color: #fff;
      box-shadow: 0 0 8px #ff4d4d40;
    }

    .scroll-container {
      max-height: 600px;
      overflow-y: auto;
      width: 100%;
      max-width: 600px;
      padding-right: 10px;
    }

    .player {
      background-color: #1e1e1e;
      border: 2px solid #ff4d4d;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 0 10px #ff4d4d50;
    }

    .track-title {
      font-size: 1.2em;
      margin-bottom: 10px;
    }

    .controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .play-btn {
      background-color: #ff4d4d;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 20px;
      color: black;
      cursor: pointer;
      transition: 0.2s;
    }

    .play-btn:hover {
      background-color: #ff1a1a;
    }

    .progress {
      flex-grow: 1;
      height: 8px;
      background-color: #333;
      margin: 0 15px;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-filled {
      width: 0%;
      height: 100%;
      background-color: #ff4d4d;
      transition: width 0.1s;
    }

    .actions {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .download-link, .share-btn {
      color: #aaa;
      text-decoration: none;
      font-size: 14px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
    }

    .share-btn:hover, .download-link:hover {
      color: #fff;
    }

    .copied {
      font-size: 12px;
      color: #6aff78;
      margin-left: 10px;
      display: none;
    }

    .copied.show {
      display: inline;
    }
  </style>
</head>
<body>

  <h1>🎧 Nekohacker591 Portfolio</h1>

  <div class="search-bar">
    <input type="text" class="search-input" placeholder="Search for a track...">
  </div>

  <div class="scroll-container" id="player-container">
    <!-- Players will be injected here -->
  </div>

  <script>
    const tracks = [
      {
        title: "Rock and Roll",
        file: "https://files.catbox.moe/wjou7m.wav"
      },
      {
        title: "Chill synth wave",
        file: "https://files.catbox.moe/cro6xp.wav"
      },
      {
        title: "not finished yet",
        file: "https://files.catbox.moe/example3.wav"
      }
    ];

    const container = document.getElementById("player-container");

    tracks.forEach(track => {
      const playerDiv = document.createElement("div");
      playerDiv.className = "player";
      playerDiv.dataset.file = track.file;

      playerDiv.innerHTML = `
        <div class="track-title">${track.title}</div>
        <div class="controls">
          <button class="play-btn">▶</button>
          <div class="progress"><div class="progress-filled"></div></div>
        </div>
        <div class="actions">
          <a class="download-link" href="${track.file}" download>⬇ Download</a>
          <button class="share-btn">🔗 Share</button>
          <span class="copied">Copied!</span>
        </div>
      `;

      container.appendChild(playerDiv);
    });

    document.querySelectorAll('.player').forEach(player => {
      const playBtn = player.querySelector('.play-btn');
      const progress = player.querySelector('.progress-filled');
      const audio = new Audio(player.dataset.file);
      audio.preload = "auto";

      playBtn.addEventListener('click', () => {
        document.querySelectorAll('.player').forEach(other => {
          if (other !== player) {
            const otherBtn = other.querySelector('.play-btn');
            otherBtn.textContent = '▶';
          }
        });

        if (audio.paused) {
          audio.play();
          playBtn.textContent = '⏸';
        } else {
          audio.pause();
          playBtn.textContent = '▶';
        }
      });

      audio.addEventListener('timeupdate', () => {
        const percent = (audio.currentTime / audio.duration) * 100;
        progress.style.width = percent + '%';
      });

      audio.addEventListener('ended', () => {
        playBtn.textContent = '▶';
        progress.style.width = '0%';
      });

      const shareBtn = player.querySelector('.share-btn');
      const copiedMsg = player.querySelector('.copied');
      const title = player.querySelector('.track-title').textContent;

      shareBtn.addEventListener('click', () => {
        const query = encodeURIComponent(title.toLowerCase().replace(/ /g, '+'));
        const baseUrl = window.location.origin + window.location.pathname;
        const shareUrl = `${baseUrl}?s=${query}`;

        navigator.clipboard.writeText(shareUrl).then(() => {
          copiedMsg.classList.add('show');
          setTimeout(() => copiedMsg.classList.remove('show'), 1500);
        });
      });
    });

    const searchInput = document.querySelector('.search-input');
    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase();
      document.querySelectorAll('.player').forEach(player => {
        const title = player.querySelector('.track-title').textContent.toLowerCase();
        player.style.display = title.includes(query) ? 'block' : 'none';
      });

      const newUrl = new URL(window.location.href);
      if (query) {
        newUrl.searchParams.set('s', query.replace(/ /g, '+'));
      } else {
        newUrl.searchParams.delete('s');
      }
      window.history.replaceState({}, '', newUrl);
    });

    window.addEventListener('DOMContentLoaded', () => {
      const urlParams = new URLSearchParams(window.location.search);
      const searchQuery = urlParams.get('s');
      if (searchQuery) {
        const cleanQuery = searchQuery.replace(/\+/g, ' ');
        searchInput.value = cleanQuery;
        const event = new Event('input');
        searchInput.dispatchEvent(event);
      }
    });
  </script>

</body>
</html>
