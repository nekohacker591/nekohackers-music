<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Default OG Meta Tags -->
  <meta property="og:title" content="ðŸŽ§ Nekohacker591 Portfolio">
  <meta property="og:description" content="Check out my music portfolio!">
  <meta property="og:type" content="website">
  <title>ðŸŽ§ Nekohacker591 Portfolio</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ§</text></svg>">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #1a1a1a;
      color: #fff;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      color: #ff4d4d;
      text-align: center;
      margin-bottom: 20px;
    }
    .search-bar {
      margin-bottom: 20px;
      width: 100%;
      max-width: 600px;
    }
    .search-input {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      border: 2px solid #ff4d4d;
      border-radius: 5px;
      background-color: #333;
      color: #fff;
    }
    .scroll-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 100%;
      max-width: 600px;
    }
    .player {
      background-color: #2a2a2a;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(255, 77, 77, 0.5);
    }
    .player.playing {
      border: 2px solid #ff4d4d;
    }
    .track-title {
      font-size: 18px;
      margin-bottom: 10px;
      color: #ff4d4d;
    }
    .controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .play-btn {
      background-color: #ff4d4d;
      border: none;
      color: #fff;
      font-size: 18px;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    .progress-container {
      flex-grow: 1;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .progress {
      flex-grow: 1;
      height: 10px;
      background-color: #444;
      border-radius: 5px;
      overflow: hidden;
      position: relative;
    }
    .progress-filled {
      height: 100%;
      background-color: #ff4d4d;
      width: 0;
      transition: width 0.1s linear;
    }
    .current-time, .duration {
      font-size: 12px;
      color: #ccc;
    }
    .actions {
      margin-top: 10px;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .download-link, .share-btn {
      background-color: #ff4d4d;
      color: #fff;
      padding: 5px 10px;
      border-radius: 5px;
      text-decoration: none;
      border: none;
      cursor: pointer;
    }
    .copied {
      opacity: 0;
      color: #ff4d4d;
      font-size: 12px;
      transition: opacity 0.3s;
    }
    .copied.show {
      opacity: 1;
    }
    .volume-slider {
      width: 100%;
      margin-top: 10px;
    }
    .error-message {
      color: red;
      margin-top: 10px;
    }
    button {
      background-color: #ff4d4d;
      color: #fff;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ§ Nekohacker591 Portfolio</h1>
  
  <div class="search-bar">
    <input type="text" class="search-input" placeholder="Search for a track..." aria-label="Search tracks">
  </div>
  <div class="scroll-container" id="player-container">
    <!-- Players will be injected here -->
  </div>

  <script>
    function formatTime(seconds) {
      if (isNaN(seconds)) return '--:--';
      const minutes = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
    }

    const tracks = [
      { title: "Rock and Roll", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/rock%20and%20roll%20mixed.wav?download=true" },
      { title: "Chill Synth Wave", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/chill%20song%20mixed.wav?download=true" },
      { title: "The Video Game Melody 2025 Edition", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/video%20game%20melody.wav?download=true" },
      { title: "Elyisan", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/idol%20song%202.wav?download=true" },
      { title: "Bang Dream", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/bang%20dream.wav?download=true" },
      { title: "Red Zone Remix", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/red%20zone%20serum%202%20evaluation%20super%20massive.wav?download=true" },
      { title: "Nee Nee Nee", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/nee%20nee%20nee%20final%20ozone%20edition.wav?download=true" },
      { title: "Circulation", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/circulation.wav?download=true" },
      { title: "Flowering Night Remix", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/flowering%20night.wav?download=true" },
      { title: "The Video Game Melody 2024 Edition ", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/mario%20melody.wav?download=true" },
      { title: "8 Bit Magic", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/8%20bit%20magic.wav?download=true" },
      { title: "Akuno Meshitsukai", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/akuno_meshitsukai%20premaster.wav?download=true" },
      { title: "Luminous Neko", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/anime%20op%202%20like%20song%20group%20master.wav?download=true" },
      { title: "Nekos's Bon AppÃ©titâ™¡", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/anime%20op%20after%20mastering.wav?download=true" },
      { title: "Do-Dai Neko Joy", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/do-dai%20neko%20joy%20remix%20trail%20test.wav?download=true" },
      { title: "Neko No Yorokobi", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/Neko%20no%20yorokobi.wav?download=true" },
      { title: "Save The World", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/good%20remix%20rock%20sprit%20rock.wav?download=true" }
    ];

    const container = document.getElementById("player-container");

    tracks.forEach((track, index) => {
      const playerDiv = document.createElement("div");
      playerDiv.className = "player";
      playerDiv.id = `player-${index}`;
      playerDiv.dataset.file = track.file;

      playerDiv.innerHTML = `
        <div class="track-title">${track.title}</div>
        <div class="controls">
          <button class="play-btn" aria-label="Play">â–¶</button>
          <div class="progress-container">
            <span class="current-time">0:00</span>
            <div class="progress"><div class="progress-filled"></div></div>
            <span class="duration">--:--</span>
          </div>
        </div>
        <div class="actions">
          <a class="download-link" href="${track.file}" download>â¬‡ Download</a>
          <button class="share-btn" aria-label="Share this track">ðŸ”— Share</button>
          <span class="copied" role="alert">Copied!</span>
        </div>
        <input type="range" class="volume-slider" min="0" max="1" step="0.01" value="1" aria-label="Volume">
        <div class="error-message" style="display: none;"></div>
      `;

      container.appendChild(playerDiv);
    });

    const players = document.querySelectorAll('.player');
    let isPlayingAll = false;
    let currentTrackIndex = 0;

    document.querySelectorAll('.player').forEach(player => {
      const playBtn = player.querySelector('.play-btn');
      const progress = player.querySelector('.progress-filled');
      const volumeSlider = player.querySelector('.volume-slider');
      const currentTimeDisplay = player.querySelector('.current-time');
      const durationDisplay = player.querySelector('.duration');
      const errorMsg = player.querySelector('.error-message');
      let audio = null;

      playBtn.addEventListener('click', () => {
        if (!audio) {
          audio = new Audio(player.dataset.file);
          player.audio = audio;
          audio.volume = parseFloat(volumeSlider.value);
          audio.addEventListener('loadedmetadata', () => {
            durationDisplay.textContent = formatTime(audio.duration);
          });
          audio.addEventListener('timeupdate', () => {
            const percent = (audio.currentTime / audio.duration) * 100;
            progress.style.width = percent + '%';
            currentTimeDisplay.textContent = formatTime(audio.currentTime);
            if (!audio.paused) {
              document.title = `ðŸŽ§ ${player.querySelector('.track-title').textContent} - Nekohacker591`;
            }
          });
          audio.addEventListener('ended', () => {
            playBtn.textContent = 'â–¶';
            progress.style.width = '0%';
            player.classList.remove('playing');
            document.title = 'ðŸŽ§ Nekohacker591 Portfolio';
            if (isPlayingAll) {
              currentTrackIndex++;
              if (currentTrackIndex < players.length) {
                playTrack(currentTrackIndex);
              } else {
                isPlayingAll = false;
              }
            }
          });
          audio.addEventListener('error', () => {
            errorMsg.textContent = 'Failed to load audio';
            errorMsg.style.display = 'block';
          });
        }
        if (audio.paused) {
          document.querySelectorAll('.player').forEach(other => {
            if (other !== player && other.audio && !other.audio.paused) {
              other.audio.pause();
              const otherBtn = other.querySelector('.play-btn');
              otherBtn.textContent = 'â–¶';
              other.classList.remove('playing');
            }
          });
          audio.play().catch(() => {
            errorMsg.textContent = 'Failed to play audio';
            errorMsg.style.display = 'block';
          });
          playBtn.textContent = 'â–®â–®';
          playBtn.setAttribute('aria-label', 'Pause');
          player.classList.add('playing');
        } else {
          audio.pause();
          playBtn.textContent = 'â–¶';
          playBtn.setAttribute('aria-label', 'Play');
          player.classList.remove('playing');
          document.title = 'ðŸŽ§ Nekohacker591 Portfolio';
          if (isPlayingAll) {
            isPlayingAll = false;
          }
        }
      });

      volumeSlider.addEventListener('input', () => {
        if (audio) {
          audio.volume = parseFloat(volumeSlider.value);
        }
      });

      const shareBtn = player.querySelector('.share-btn');
      const copiedMsg = player.querySelector('.copied');
      const index = Array.from(container.children).indexOf(player);
      const baseUrl = window.location.origin + window.location.pathname;

      shareBtn.addEventListener('click', () => {
        const shareUrl = `${baseUrl}?id=${index}&share=true`;
        navigator.clipboard.writeText(shareUrl).then(() => {
          copiedMsg.classList.add('show');
          setTimeout(() => copiedMsg.classList.remove('show'), 1500);
        });
      });
    });

    const playAllBtn = document.getElementById('play-all');

    playAllBtn.addEventListener('click', () => {
      isPlayingAll = true;
      currentTrackIndex = 0;
      playTrack(currentTrackIndex);
    });

    function playTrack(index) {
      if (index >= players.length) {
        isPlayingAll = false;
        return;
      }
      const player = players[index];
      const playBtn = player.querySelector('.play-btn');
      playBtn.click();
    }

    const searchInput = document.querySelector('.search-input');
    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase();
      document.querySelectorAll('.player').forEach(player => {
        const title = player.querySelector('.track-title').textContent.toLowerCase();
        player.style.display = title.includes(query) ? 'block' : 'none';
      });

      const newUrl = new URL(window.location.href);
      if (query) {
        newUrl.searchParams.set('s', query.replace(/ /g, '+'));
      } else {
        newUrl.searchParams.delete('s');
      }
      window.history.replaceState({}, '', newUrl);
    });

    function setOgMetaTags(title, description, url) {
      document.title = title;
      const metaTags = [
        { property: 'og:title', content: title },
        { property: 'og:description', content: description },
        { property: 'og:url', content: url },
        { property: 'og:type', content: 'music.song' }
        // Add og:image if you have an image URL, e.g., { property: 'og:image', content: 'https://example.com/image.jpg' }
      ];
      metaTags.forEach(tag => {
        let meta = document.querySelector(`meta[property="${tag.property}"]`);
        if (!meta) {
          meta = document.createElement('meta');
          meta.setAttribute('property', tag.property);
          document.head.appendChild(meta);
        }
        meta.setAttribute('content', tag.content);
      });
    }

    window.addEventListener('DOMContentLoaded', () => {
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get('id');
      const shareMode = urlParams.get('share') === 'true';
      const searchQuery = urlParams.get('s');

      let title = 'ðŸŽ§ Nekohacker591 Portfolio';
      let description = 'Check out my music portfolio!';
      let url = window.location.origin + window.location.pathname;

      if (shareMode && id) {
        const track = tracks[id];
        if (track) {
          title = `ðŸŽ§ ${track.title} - Nekohacker591 Portfolio`;
          description = `Listen to "${track.title}" by Nekohacker591`;
          url = window.location.href;
          const player = document.getElementById(`player-${id}`);
          if (player) {
            document.querySelectorAll('.player').forEach(p => {
              p.style.display = p === player ? 'block' : 'none';
            });
            document.querySelector('h1').style.display = 'none';
            document.querySelector('.search-bar').style.display = 'none';
            const container = document.getElementById('player-container');
            container.style.maxWidth = 'none';
            container.style.width = '100%';
            // Add back button
            const backBtn = document.createElement('button');
            backBtn.textContent = 'Back to all tracks';
            backBtn.addEventListener('click', () => {
              window.location.search = '';
            });
            document.body.insertBefore(backBtn, document.querySelector('h1'));
          }
        } else {
          const message = document.createElement('p');
          message.textContent = 'Song not found';
          message.style.color = '#ff4d4d';
          container.appendChild(message);
        }
      } else if (searchQuery) {
        const cleanQuery = searchQuery.replace(/\+/g, ' ');
        searchInput.value = cleanQuery;
        const event = new Event('input');
        searchInput.dispatchEvent(event);
      }

      setOgMetaTags(title, description, url);
    });
  </script>
</body>
</html>
