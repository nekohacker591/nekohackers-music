<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸŽ§ Nekohacker591 Portfolio</title>
  <style>
    body {
      background-color: #121212;
      color: #eee;
      font-family: 'Courier New', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
    }

    h1 {
      color: #ff4d4d;
      margin-bottom: 20px;
    }

    .search-bar {
      margin-bottom: 20px;
      width: 100%;
      max-width: 600px;
    }

    .search-input {
      width: 100%;
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ff4d4d;
      background-color: #1e1e1e;
      color: #fff;
      box-shadow: 0 0 8px #ff4d4d40;
    }

    .scroll-container {
      max-height: 600px;
      overflow-y: auto;
      width: 100%;
      max-width: 600px;
      padding-right: 10px;
    }

    .player {
      background-color: #1e1e1e;
      border: 2px solid #ff4d4d;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 0 10px #ff4d4d50;
      position: relative;
    }

    .track-title {
      font-size: 1.2em;
      margin-bottom: 10px;
    }

    .controls {
      display: flex;
      align-items: center;
    }

    .play-btn {
      background-color: #ff4d4d;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 20px;
      color: black;
      cursor: pointer;
      transition: 0.2s;
    }

    .play-btn:hover {
      background-color: #ff1a1a;
    }

    .progress-container {
      display: flex;
      align-items: center;
      flex-grow: 1;
      margin-left: 10px;
    }

    .current-time, .duration {
      font-size: 14px;
      min-width: 40px;
      text-align: center;
    }

    .progress {
      flex-grow: 1;
      height: 8px;
      background-color: #333;
      margin: 0 5px;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-filled {
      width: 0%;
      height: 100%;
      background-color: #ff4d4d;
      transition: width 0.1s;
    }

    .actions {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }

    .download-link {
      color: #aaa;
      text-decoration: none;
      display: inline-block;
    }

    .download-link:hover {
      color: #fff;
    }

    .share-btn {
      background-color: #ff4d4d;
      border: none;
      color: black;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    .share-btn:hover {
      background-color: #ff1a1a;
    }

    .copied {
      color: #00ff88;
      font-size: 12px;
      display: none;
    }

    .copied.show {
      display: inline;
    }

    .volume-slider {
      -webkit-appearance: none;
      width: 100px;
      height: 6px;
      background: #333;
      border-radius: 3px;
      outline: none;
      cursor: pointer;
      box-shadow: 0 0 5px #ff4d4d80;
      position: absolute;
      bottom: 10px;
      right: 20px;
    }

    .volume-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      height: 14px;
      width: 14px;
      border-radius: 50%;
      background: #ff4d4d;
      cursor: pointer;
      border: none;
    }
  </style>
</head>
<body>

  <h1>ðŸŽ§ Nekohacker591 Portfolio</h1>

  <div class="search-bar">
    <input type="text" class="search-input" placeholder="Search for a track...">
  </div>

  <div class="scroll-container" id="player-container">
    <!-- Players will be injected here -->
  </div>

  <script>
    function formatTime(seconds) {
      if (isNaN(seconds)) return '--:--';
      const minutes = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
    }

    const tracks = [
      { title: "Rock and Roll", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/rock%20and%20roll%20mixed.wav?download=true" },
      { title: "Chill Synth Wave", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/chill%20song%20mixed.wav?download=true" },
      { title: "The Video Game Melody", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/video%20game%20melody.wav?download=true" },
      { title: "Elyisan", file: "https://huggingface.co/datasets/nekohacker591/music/resolve/main/mus/idol%20song%202.wav?download=true" }
    
    ];

    const container = document.getElementById("player-container");

    tracks.forEach(track => {
      const playerDiv = document.createElement("div");
      playerDiv.className = "player";
      playerDiv.dataset.file = track.file;

      playerDiv.innerHTML = `
        <div class="track-title">${track.title}</div>
        <div class="controls">
          <button class="play-btn">â–¶</button>
          <div class="progress-container">
            <span class="current-time">0:00</span>
            <div class="progress"><div class="progress-filled"></div></div>
            <span class="duration">--:--</span>
          </div>
        </div>
        <div class="actions">
          <a class="download-link" href="${track.file}" download>â¬‡ Download</a>
          <button class="share-btn">ðŸ”— Share</button>
          <span class="copied">Copied!</span>
        </div>
        <input type="range" class="volume-slider" min="0" max="1" step="0.01" value="1">
      `;

      container.appendChild(playerDiv);
    });

    document.querySelectorAll('.player').forEach(player => {
      const playBtn = player.querySelector('.play-btn');
      const progress = player.querySelector('.progress-filled');
      const volumeSlider = player.querySelector('.volume-slider');
      const currentTimeDisplay = player.querySelector('.current-time');
      const durationDisplay = player.querySelector('.duration');
      const audio = new Audio(player.dataset.file);
      audio.preload = "auto";
      player.audio = audio; // Attach audio to player for later access

      audio.volume = parseFloat(volumeSlider.value);

      audio.addEventListener('loadedmetadata', () => {
        durationDisplay.textContent = formatTime(audio.duration);
      });

      audio.addEventListener('timeupdate', () => {
        const percent = (audio.currentTime / audio.duration) * 100;
        progress.style.width = percent + '%';
        currentTimeDisplay.textContent = formatTime(audio.currentTime);
        // Update page title with current track
        if (!audio.paused) {
          document.title = `ðŸŽ§ ${player.querySelector('.track-title').textContent} - Nekohacker591`;
        }
      });

      audio.addEventListener('ended', () => {
        playBtn.textContent = 'â–¶';
        progress.style.width = '0%';
        document.title = 'ðŸŽ§ Nekohacker591 Portfolio'; // Reset title when track ends
      });

      volumeSlider.addEventListener('input', () => {
        audio.volume = parseFloat(volumeSlider.value);
      });

      playBtn.addEventListener('click', () => {
        if (audio.paused) {
          // Pause other playing audios
          document.querySelectorAll('.player').forEach(other => {
            if (other !== player && other.audio && !other.audio.paused) {
              other.audio.pause();
              const otherBtn = other.querySelector('.play-btn');
              otherBtn.textContent = 'â–¶';
            }
          });
          audio.play();
          playBtn.textContent = 'â–®â–®';
        } else {
          audio.pause();
          playBtn.textContent = 'â–¶';
          document.title = 'ðŸŽ§ Nekohacker591 Portfolio'; // Reset title when paused
        }
      });

      const shareBtn = player.querySelector('.share-btn');
      const copiedMsg = player.querySelector('.copied');
      const title = player.querySelector('.track-title').textContent;

      shareBtn.addEventListener('click', () => {
        const query = encodeURIComponent(title.toLowerCase().replace(/ /g, '+'));
        const baseUrl = window.location.origin + window.location.pathname;
        const shareUrl = `${baseUrl}?s=${query}`;
        navigator.clipboard.writeText(shareUrl).then(() => {
          copiedMsg.classList.add('show');
          setTimeout(() => copiedMsg.classList.remove('show'), 1500);
        });
      });
    });

    const searchInput = document.querySelector('.search-input');
    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase();
      document.querySelectorAll('.player').forEach(player => {
        const title = player.querySelector('.track-title').textContent.toLowerCase();
        player.style.display = title.includes(query) ? 'block' : 'none';
      });

      const newUrl = new URL(window.location.href);
      if (query) {
        newUrl.searchParams.set('s', query.replace(/ /g, '+'));
      } else {
        newUrl.searchParams.delete('s');
      }
      window.history.replaceState({}, '', newUrl);
    });

    window.addEventListener('DOMContentLoaded', () => {
      const urlParams = new URLSearchParams(window.location.search);
      const searchQuery = urlParams.get('s');
      if (searchQuery) {
        const cleanQuery = searchQuery.replace(/\+/g, ' ');
        searchInput.value = cleanQuery;
        const event = new Event('input');
        searchInput.dispatchEvent(event);
      }
    });
  </script>

</body>
</html>
